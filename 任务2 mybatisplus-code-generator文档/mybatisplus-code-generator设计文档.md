## 需求

#### 1.实现mybatisplus自动代码生成插件，要求可以生成：

* xml文件：自定义写sql
* kt文件
  * @TableName
    class TestEntity
  * TestDao: baseMapper
* 实现类和接口类 Repository, ServiceImpl<TestDao, TestEntity>()

#### 2.可支持生成kotlin代码和Java代码

#### 3.支持去除表前缀和字段前缀

## 选型方案

在原插件基础上进行修改，实现所需功能。

## 代码结构

### 分为两个模块

#### 1.自动代码生成模块(核心模块) mybatisplus- generator-disposition

##### config包

* 主要是配置类，基本配置、全局配置等，包含了要生成的各部分代码所需要的配置与信息。例如：包名、类名、路径等配置。

##### enums包

* 枚举类，包含主键类型、模版类型等。

##### log包

* 自定义的日志打印输出。

##### exception包

* 自定义的异常。

##### manager包

* 用于实现处理缓存、保存全局化配置等功能，以及初始化配置。

##### service包

* 用于实现获取表名和字段名、数据库名等。

##### utils包

* 工具类，用于实现字符串处理、类型处理等；如下划线转驼峰、去除前缀。

##### core包

* 包括要生成的代码模型，模板中所需的属性等。
* 实现代码生成功能。

##### view包

* 实现UI界面。

#### 2.插件模块 mybatisplus-generator-idea

##### action包

* 插件行为，作为tool menus上的选项。

##### service包

* 初始化插件和启动插件。

##### utils

* 获取当前项目对象。

## 工作流程

* 7.11-7.13 了解需求；实现mybatisplus自动生成kotlin代码的小demo；了解原插件模型；确定选型方案。

* 7.14-7.16 实现枚举类和配置类；实现manager包；查找实现插件UI的方式，实现主界面。
* 7.18-7.20 修复UI界面出现的问题，复用UI界面；实现添加和连接数据源；实现配置的缓存；实现表详情页和配置页的功能；
* 7.20-7.22 实现生成kotlin代码和生成Java代码的模板文件；添加控件可选生成kotlin或Java代码；实现了去除表前缀和去除字段前缀的功能；实现了清除缓存和重置系统的功能。
* 7.25-7.28 创建插件工程，解决依赖问题；解决自动代码生成模块打包问题以及插件的打包问题；安装插件并且进行测试；输出文档；优化插件，优化了kt文件不需要导入的类，优化了类名，后缀可自定义。